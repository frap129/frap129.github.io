<!DOCTYPE html>
<html class="qp-ui" data-qp-ui="{
&#39;Futurizr&#39;: {
&#39;hasTouch&#39;: &#39;touch&#39;
}
}" data-qp-ui-data-id="qp:0"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="./style.css" rel="stylesheet">
<link href="./index_files/css" rel="stylesheet" type="text/css">
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, width=device-width">
<title>GrapheneRom</title>
</head>
<body class="section-material-design first-chapter qp-ui qp-ui-mask" data-qp-ui="{ &#39;Mask&#39;: {} }" data-qp-ui-data-id="qp:1">
<header class="qp-ui qp-ui-peekaboo" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: -72,
&#39;desktop-sm&#39;: -72,
&#39;default&#39;: -192
}
}" data-qp-ui-data-id="qp:2">
<div class="header-wrapper qp-ui qp-ui-peekaboo" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}" data-qp-ui-data-id="qp:3">
<div class="header-title">
<span id="logo"><img src="http://i.imgur.com/CvgWJy9.png" alt="Graphene logo"></span>
</div>
</div><div class="header-wrapper qp-ui qp-ui-peekaboo-placeholder" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}" data-qp-ui-data-id="qp:3" aria-hidden="true">
<div class="header-title">
<span class="section-title">GrapheneROM</span>
</div>
</div><div class="header-wrapper qp-ui qp-ui-peekaboo-placeholder qp-ui-peekaboo" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}" aria-hidden="true" data-qp-ui-data-id="qp:0">
<div class="header-title">
<span class="section-title">GrapheneROM</span>
<span class="chapter-title">About Graphene</span>
</div>
</div><div class="header-wrapper qp-ui qp-ui-peekaboo-placeholder qp-ui-peekaboo-placeholder" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}" aria-hidden="true">
<div class="header-title">
<span class="section-title">GrapheneROM</span>
<span class="chapter-title">About Graphene</span>
</div>
</div>
</header><header class="qp-ui qp-ui-peekaboo-placeholder" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: -72,
&#39;desktop-sm&#39;: -72,
&#39;default&#39;: -192
}
}" data-qp-ui-data-id="qp:2" aria-hidden="true">
<div class="header-wrapper qp-ui qp-ui-peekaboo" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}" data-qp-ui-data-id="qp:3">
<div class="header-title">
<span class="section-title">GrapheneROM</span>
</div>
</div><div class="header-wrapper qp-ui qp-ui-peekaboo-placeholder" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}" aria-hidden="true">
<div class="header-title">
<span class="section-title">GrapheneROM</span>
<span class="chapter-title">About Graphene</span>
</div>
</div>
</header><header class="qp-ui qp-ui-peekaboo-placeholder qp-ui-peekaboo" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: -72,
&#39;desktop-sm&#39;: -72,
&#39;default&#39;: -192
}
}" aria-hidden="true" data-qp-ui-data-id="qp:1">
<div class="header-wrapper qp-ui qp-ui-peekaboo qp-ui-peekaboo-active" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}" data-qp-ui-data-id="qp:2">
<div class="header-title">
<span class="section-title">GrapheneROM</span>
<span class="chapter-title">About Graphene</span>
</div>
</div><div class="header-wrapper qp-ui qp-ui-peekaboo-placeholder qp-ui-peekaboo-active" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}" aria-hidden="true">
<div class="header-title">
<span class="section-title">GrapheneROM</span>
<span class="chapter-title">About Graphene</span>
</div>
</div>
</header><header class="qp-ui qp-ui-peekaboo-placeholder qp-ui-peekaboo-placeholder" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: -72,
&#39;desktop-sm&#39;: -72,
&#39;default&#39;: -192
}
}" aria-hidden="true">
<div class="header-wrapper qp-ui" data-qp-ui="{
&#39;Peekaboo&#39;: {
&#39;mobile&#39;: 28,
&#39;desktop-sm&#39;: 28,
&#39;default&#39;: 18
}
}">
<div class="header-title">
<span class="section-title">GrapheneROM</span>
<span class="chapter-title">About Graphene</span>
</div>
</div>
</header>
<nav>
<button class="hamburger-button qp-ui qp-ui-side-nav-toggle" data-qp-ui="{ &#39;SideNavToggle&#39;: {} }" role="tab" aria-expanded="false" data-qp-ui-data-id="qp:4">Show navigation</button>
</nav>
<div id="side-nav" class="qp-ui qp-ui-side-nav-drawer" data-qp-ui="{ &#39;SideNavDrawer&#39;: {} }" data-qp-ui-data-id="qp:5">
<div class="side-nav-wrapper">
<span id="logo"><img src="http://i.imgur.com/x9d5Aba.png" alt="Graphene logo"></span>
<nav>
<dl>
<dt class="qp-ui goog-zippy-header goog-zippy-expanded" data-qp-ui="{ &#39;SideNavZippy&#39;: true }" tabindex="0" role="tab" aria-expanded="true" data-qp-ui-data-id="qp:6">GrapheneROM</dt>
<div style="overflow: hidden;"><div style="overflow: hidden;"><dd>
<a class="nav_selected" href="http://graphenerom.github.io/#">About Graphene</a>
<a href="https://s.basketbuild.com/devs/frap129">Download</a>
<a href="https://github.com/GrapheneROM/android">GitHub</a>
<a href="https://github.com/GrapheneROM/android">Developer Tutorials</a>
<a href="https://github.com/GrapheneROM/android">How You Can Help</a>
</dd></div></div>
</dl>
</nav>
<div class="legal">
<p class="copyright">Joe Maples ©</p>
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy</a> &amp; <a href="http://www.google.com/intl/en/policies/terms/">Terms</a>
</div>
</div>		
</div>
<div id="grid-cont">
<section class="grid_outer chapter">
<h1 class="chapter-title">Tutorials for New/Learning Developers</h1>
<div class="chapter-content">
</div>
<div class="chapter-intro">Want to learn how to build ROM's, add features, optimize source, or anything else? You've come to the right place. We, Team Graphene, care about all the little developers out there who just want to build ROM's, thats how we got our starts, so I've decided to take on the ongoing task of consolidating most of the instructions that you'll ever need into one page, just so you don't have to go through the same problems we had when trying to find answers to a simple question. Happy Deving!
</div>
<nav class="chapter-toc">
<h1>Contents</h1>
<ul>
<li><a class="gweb-smoothscroll-control qp-ui" data-qp-ui="{ &#39;SmoothScroll&#39;: {} }" href="http://graphenerom.github.io/#setup" data-qp-ui-data-id="qp:e">Getting Started with Building</a></li>
<li><a class="gweb-smoothscroll-control qp-ui" data-qp-ui="{ &#39;SmoothScroll&#39;: {} }" href="https://graphenerom.github.io/#optimizations" data-qp-ui-data-id="qp:f">Optimizations</a></li>
</ul>
</nav>
<div class="article-list">
<div id="setup" class="article qp-ui" data-qp-ui="{ &#39;ScrollSpy&#39;: {} }" data-qp-ui-data-id="qp:g">
<h2 class="article-title qp-ui" data-qp-ui="{ &#39;ResponsiveZippy&#39;: {} }" data-qp-ui-data-id="qp:h">
Key Features
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="icon icon-expand-collapse" role="img" viewBox="0 0 10 10" aria-labelledby="title desc">
<title id="title">Expand and collapse content</title>
<desc id="desc">An arrow that points down when collapsed and points up when expanded.</desc>
<polygon role="presentation" points="2.5,4.167 5,6.667 7.5,4.167 6.917,3.583 5,5.5 3.083,3.583"></polygon>
</svg>
</h2>
<div class="article-content">
<div class="module-list">
<div id="goals-goals-1">
<section class="moduleE1">
<div class="caption-title">
Step 1:
<p>   install 64-bit linux.  you MUST have 64-bit linux and at least 4 GB ram. You may be able to build with less but you will have a serious amount of swap which will slow you down hellishly.  If you're interested in speeding up your build time consider buying an SSD, then CPU, then more RAM.  an SSD will speed up your process 10x, especially with ccache.  I suggest installing the most recent version of either Ubuntu or Mint.  You're on your own for this step. </p>
     
<p>    preliminary linux users:
<br>    part 1:  make sure you've set up your computer and familiarized yourself with basic linux commands such as navigating the terminal, copying files, sudo, rm, ls, diff, apt-get, update-alternative, gedit and other basic useful commands.  you may want to make yourself a cheatsheet as your desktop wallpaper until you get used to it if you're new</p>
     
<br>    part 2:  before you install anything, you will want to run a few commands that will align your version of linux with the latest repositories and kernel updates available to unbuntu.
<br>    
<br>    sudo apt-get update
<br>    sudo apt-get upgrade</p>
   
     
     
Step 2: Oracle Java SE JDK version 6.XX
    The build environment:
    The first part of setting up a build environment is installing the correct java package.  with ubuntu/mint openJDK is included and the android build process set this as incompatible.  I modified our build process to except building with openJDK which would be acceptable for testing purposes only but not for publishing anything.
     
    You will need oracle JDK 6.  get the latest version here:
    http://www.webupd8.org/2012/11/oracle-sun-java-6-installer-available.html
    scroll down to java SE 6 update ___ fill in the blank for latest.
    download the latest 64-bit version for ubuntu.
     
run these commands to install:  
    (notice 6uXX and 1.6.0_XX means 6u37 or 1.6.0_37 if that's the version you downloaded)
     
    sudo chmod a+x ~/Downloads/jdk-6uXX-linux-x64.bin
    sudo cp ~/Downloads/jdk-6u30-linux-x64.bin /usr/lib
    cd /usr/lib
    sudo ./jdk-6uXX-linux-x64.bin
    sudo mv /usr/lib/jdk1.6.0_XX/ /usr/lib/jvm/
     
now it's time to "switch" to oracle java:
    run this command and see how many other versions of java are available for use. you will want to take note of the number on the left.  reenter the number that is in use for now.
       
    sudo update-alternatives ––config java
     
    run this command and input one number greater than what was available in the previous command at the end of the string. you will need to change the XX again to the version number you downloaded. notice i have placed a 2 at the end becuase open JDK was already installed.
   
    cd into /usr/lib/jvm/jdk1.6.0_XX (the one you just installed)  
    sudo update-alternatives ––install /usr/bin/java java /usr/lib/jvm/jdk1.6.0_XX/jre/bin/java 2
     
Create symbolic links for the new java files (again XX is your downloaded version)
     
    cd /usr/bin
    sudo ln -s /usr/lib/jvm/jdk1.6.0_XX/bin/javac
    sudo ln -s /usr/lib/jvm/jdk1.6.0_XX/bin/jar
    sudo ln -s /usr/lib/jvm/jdk1.6.0_XX/bin/javadoc
     
    If you run into problems with the symbolic links already being here you can just delete them and run the commands to recreate them
     
     
     
Step 3: GCC-Linaro compiler 4.7.2 - *note* this does not mean it's a "Linaro" build. I'm including this step in the advent we start using more forward tool chains.
     
    Type this command to see which version you are running:
    gcc -v
     
    if you do not have GCC 4.7.2 (latest at the time of this writing)
    sudo add-apt-repository ppa:ubuntu-toolchain-r/test
    sudo apt-get update
    sudo apt-get install gcc-4.7
    sudo update-alternatives --config gcc
     
     
     
Step 4: Installing necessary packages
     
    sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl zlib1g-dev libc6-dev lib32ncurses5-dev ia32-libs x11proto-core-dev libx11-dev lib32readline-gplv2-dev lib32z-dev libgl1-mesa-dev g++-multilib mingw32 tofrodos python-markdown libxml2-utils xsltproc pngcrush
     
    sudo apt-get install libx11-dev:i386
    sudo ln -s /usr/lib/i386-linux-gnu/libX11.so.6 /usr/lib/i386-linux-gnu/libX11.so
     
     
     
Step 5: Configuring ADB access
     
    sudo touch /etc/udev/rules.d/51-android.rules
    sudo gedit /etc/udev/rules.d/51-android.rules
     
    copy the following into the empty gedit you've just created replacing username with your user name.  Mine is PrimeDirective so it looks like <PrimeDirective>.
    # adb protocol on passion (Nexus One) SUBSYSTEM==”usb”, ATTR{idVendor}==”18d1″, ATTR{idProduct}==”4e12″, MODE=”0600″, OWNER=”<username>” # fastboot protocol on passion (Nexus One) SUBSYSTEM==”usb”, ATTR{idVendor}==”0bb4″, ATTR{idProduct}==”0fff”, MODE=”0600″, OWNER=”<username>” # adb protocol on crespo/crespo4g (Nexus S) SUBSYSTEM==”usb”, ATTR{idVendor}==”18d1″, ATTR{idProduct}==”4e22″, MODE=”0600″, OWNER=”<username>” # fastboot protocol on crespo/crespo4g (Nexus S) SUBSYSTEM==”usb”, ATTR{idVendor}==”18d1″, ATTR{idProduct}==”4e20″, MODE=”0600″, OWNER=”<username>” # adb protocol on stingray/wingray (Xoom) SUBSYSTEM==”usb”, ATTR{idVendor}==”22b8″, ATTR{idProduct}==”70a9″, MODE=”0600″, OWNER=”<username>” # fastboot protocol on stingray/wingray (Xoom) SUBSYSTEM==”usb”, ATTR{idVendor}==”18d1″, ATTR{idProduct}==”708c”, MODE=”0600″, OWNER=”<username>” # adb protocol on maguro/toro (Galaxy Nexus) SUBSYSTEM==”usb”, ATTR{idVendor}==”04e8″, ATTR{idProduct}==”6860″, MODE=”0600″, OWNER=”<username>” # fastboot protocol on maguro/toro (Galaxy Nexus) SUBSYSTEM==”usb”, ATTR{idVendor}==”18d1″, ATTR{idProduct}==”4e30″, MODE=”0600″, OWNER=”<username>” # adb protocol on panda (PandaBoard) SUBSYSTEM==”usb”, ATTR{idVendor}==”0451″, ATTR{idProduct}==”d101″, MODE=”0600″, OWNER=”<username>” # fastboot protocol on panda (PandaBoard) SUBSYSTEM==”usb”, ATTR{idVendor}==”0451″, ATTR{idProduct}==”d022″, MODE=”0600″, OWNER=”<username>”
     
     
     
Step 6: Installing Android-SDK
     
    download the zipped package from this location:
    http://developer.android.com/sdk/index.html
     
    copy the package to the location of your choice.  I suggest in your home folder but please note where you installed it because you will need it later.
     
    mine is in this directory:
    /home/primedirective/code/android-sdk-linux/tools/android
     
     
    now run the SDK so you can download the API you need to build. you can do this via terminal or you can just open a file browser.
     
     
     
Step 7: Enjoy a cold frosty beverage.  Ahhhh-- Intermission.
     
Step 8: Installing Repo
     
    cd into your home directory in terminal:
    mkdir ~/bin
    PATH=~/bin:$PATH
    curl https://dl-ssl.google.com/dl/googlesource/git-repo/repo > ~/bin/repo
    chmod a+x ~/bin/repo
     
     
     
Step 9:  Initializing the manifest/getting the source
     
    cd into the folder that you'd like the source to download to.  The sync is huge and will take a long time but if it errors out it will pick up roughly where it left off.  Also, you will notice the files don't appear until after the sync is complete.  That is because they go to a magical hidden location first in case you screw up something royally like delete an entire build directory then repo copy's the files back w/o having to download them all again.
 
run "repo init -u https://github.com/frap129/android.git -b kk && repo sync -f -j8"
 
Step 10: Building the ROM: The Simple method
 
Build Graphene with the following command
 
"bash build.sh {options} {device}"
Use the following as options...
 
Options:
-c# Cleanin options before build:
        c1 - make clean
        c2 - make dirty
        c3 - make magic (doesnt alwasy work)
        c4 - make kernelclean (dont really need this)
-d  Use dex optimizations
-i  Static Initlogo
-j# Set jobs
-s  Sync before build
-p  Build using pipe
-v  Verbose build output
Example: "bash build.sh -c3 -p -j18 d2lte"
 
Step 11: Building ROM the real way
Inside of your source folder, run ". build/envsetup.sh" Then run "lunch carbon_{device}-userdebug"
To begin compiling, run "make carbon -j{opt-jobs}" with opt-jobs being the output of "grep -c processor /proc/cpuinfo"
 
Remember to "make clean && rm -rf ~/.ccache" every once in a while and after doing any changes.
</section>
</div>
<div id="goals-goals-2">
<section class="moduleE1">
<div class="module-body">
Develop a single underlying system that allows for a unified experience across platforms and device sizes. Mobile precepts are fundamental, but touch, voice, mouse, and keyboard are all ﬁrst-class input methods.
</div>
<div class="figure-group">
<div class="figure-row">
<figure>
<div class="media">
<div>
<picture>
<source srcset="//material-design.storage.googleapis.com/images/materialdesign-goals-cutrectangles_large_mdpi.png, //material-design.storage.googleapis.com/images/materialdesign-goals-cutrectangles_large_xhdpi.png 2x, //material-design.storage.googleapis.com/images/materialdesign-goals-cutrectangles_large_xhdpi.png 3x">
<img src="./index_files/materialdesign-goals-cutrectangles_large_mdpi.png" alt="">
</picture>
</div>
</div>
</figure>
</div>
</div>
</section>
</div>
</div>
</div>
</div>
<div id="optimizations" class="article qp-ui" data-qp-ui="{ &#39;ScrollSpy&#39;: {} }" data-qp-ui-data-id="qp:i">
<h2 class="article-title qp-ui" data-qp-ui="{ &#39;ResponsiveZippy&#39;: {} }" data-qp-ui-data-id="qp:j">
Principles
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="icon icon-expand-collapse" role="img" viewBox="0 0 10 10" aria-labelledby="title desc">
<title id="title">Expand and collapse content</title>
<desc id="desc">An arrow that points down when collapsed and points up when expanded.</desc>
<polygon role="presentation" points="2.5,4.167 5,6.667 7.5,4.167 6.917,3.583 5,5.5 3.083,3.583"></polygon>
</svg>
</h2>
<script src="./index_files/picturefill.min.js"></script>		
<script src="./index_files/main.js"></script>		
		
<div class="qp-ui-mask-modal"></div>		
<div class="qp-ui-mask-modal"></div></body></html>
